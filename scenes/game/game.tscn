[gd_scene load_steps=15 format=4 uid="uid://dbl6hwa0v1ug3"]

[ext_resource type="PackedScene" uid="uid://bpjqvkj1kr5fo" path="res://scenes/game/player.tscn" id="1_e2o6t"]
[ext_resource type="Script" uid="uid://b24673wfunc3n" path="res://scripts/game/game.gd" id="1_fc0e3"]
[ext_resource type="PackedScene" uid="uid://xxfc5ha2onxg" path="res://scenes/game/enemies/nerd.tscn" id="2_lfrn8"]
[ext_resource type="PackedScene" uid="uid://2jvr37tkaxc0" path="res://scenes/game/enemies/ranged.tscn" id="3_2a8rs"]
[ext_resource type="PackedScene" uid="uid://bqibghathttcv" path="res://scenes/game/enemies/boss.tscn" id="4_4j704"]
[ext_resource type="AudioStream" uid="uid://dyvhpmnn3xsxb" path="res://audio/prowler-sound-effect_6bXErot.wav" id="4_fc0e3"]
[ext_resource type="Script" uid="uid://b480cqti2atim" path="res://scripts/menu/to_main_menu.gd" id="5_5i0tg"]
[ext_resource type="Script" uid="uid://cxeb5otsj7hmg" path="res://scripts/menu/to_game.gd" id="5_bdhmt"]
[ext_resource type="PackedScene" uid="uid://b8p0p4gerasua" path="res://scenes/game/item_menu.tscn" id="8_2a8rs"]
[ext_resource type="Texture2D" uid="uid://cpertf7cshbed" path="res://world_assets/generic_tile.png" id="8_87uf6"]
[ext_resource type="Script" uid="uid://x0atoeem37bp" path="res://scripts/menu/menu_button.gd" id="11_kp23o"]

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_bdhmt"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_2a8rs"]
texture = ExtResource("8_87uf6")
texture_region_size = Vector2i(100, 100)
0:0/0 = 0

[sub_resource type="TileSet" id="TileSet_4j704"]
tile_size = Vector2i(100, 100)
sources/0 = SubResource("TileSetAtlasSource_2a8rs")

[node name="Game" type="Node2D" node_paths=PackedStringArray("player")]
y_sort_enabled = true
script = ExtResource("1_fc0e3")
player = NodePath("PlayerLol")
melee_enemy = ExtResource("2_lfrn8")
ranged_enemy = ExtResource("3_2a8rs")
boss_enemy = ExtResource("4_4j704")

[node name="PlayerLol" parent="." instance=ExtResource("1_e2o6t")]
unique_name_in_owner = true
position = Vector2(958, 542)

[node name="WaveTimer" type="Timer" parent="."]
unique_name_in_owner = true
wait_time = 5.0
one_shot = true

[node name="SubTimer" type="Timer" parent="WaveTimer"]
unique_name_in_owner = true
one_shot = true

[node name="DeadMenu" type="CanvasLayer" parent="."]
unique_name_in_owner = true
visible = false

[node name="ColorRect" type="ColorRect" parent="DeadMenu"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 0.658824)

[node name="RichTextLabel" type="RichTextLabel" parent="DeadMenu/ColorRect"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_bottom = -534.0
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/normal_font_size = 206
text = "Tomatoh no!
You died!"
horizontal_alignment = 1
vertical_alignment = 1

[node name="RestartButton" type="Button" parent="DeadMenu"]
anchors_preset = -1
anchor_left = 0.5
anchor_top = 0.644
anchor_right = 0.5
anchor_bottom = 0.644
offset_left = -551.0
offset_top = 181.48
offset_right = -104.0
offset_bottom = 347.48
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/font_size = 116
text = "Restart"
script = ExtResource("5_bdhmt")

[node name="MainMenuButton" type="Button" parent="DeadMenu"]
anchors_preset = -1
anchor_left = 0.5
anchor_top = 0.644
anchor_right = 0.5
anchor_bottom = 0.644
offset_left = -21.5
offset_top = 181.48
offset_right = 617.5
offset_bottom = 347.48
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/font_size = 116
text = "Main Menu"
script = ExtResource("5_5i0tg")

[node name="StatsText" type="RichTextLabel" parent="DeadMenu"]
unique_name_in_owner = true
offset_left = 525.0
offset_top = 549.0
offset_right = 1407.0
offset_bottom = 859.0
theme_override_font_sizes/normal_font_size = 46
text = "Stats:"

[node name="GameStartSound" type="AudioStreamPlayer2D" parent="."]
unique_name_in_owner = true
stream = ExtResource("4_fc0e3")
autoplay = true
max_distance = 1e+07
panning_strength = 0.0
bus = &"MenuSFX"

[node name="World" type="Node" parent="."]

[node name="BorderHitbox" type="StaticBody2D" parent="World"]

[node name="Bottom" type="CollisionShape2D" parent="World/BorderHitbox"]
position = Vector2(0, 5000)
shape = SubResource("WorldBoundaryShape2D_bdhmt")
one_way_collision = true

[node name="Left" type="CollisionShape2D" parent="World/BorderHitbox"]
position = Vector2(-5000, 0)
rotation = 1.5708
shape = SubResource("WorldBoundaryShape2D_bdhmt")
one_way_collision = true

[node name="Right" type="CollisionShape2D" parent="World/BorderHitbox"]
position = Vector2(5000, 0)
rotation = 4.71239
shape = SubResource("WorldBoundaryShape2D_bdhmt")
one_way_collision = true

[node name="Top" type="CollisionShape2D" parent="World/BorderHitbox"]
position = Vector2(0, -5000)
rotation = 3.14159
shape = SubResource("WorldBoundaryShape2D_bdhmt")
one_way_collision = true

[node name="VisibleBorder" type="Node" parent="World"]

[node name="Top" type="ColorRect" parent="World/VisibleBorder"]
z_index = -5
offset_left = -7000.0
offset_top = -6000.0
offset_right = 7000.0
offset_bottom = -5000.0
color = Color(0, 0, 0, 0.392157)

[node name="Left" type="ColorRect" parent="World/VisibleBorder"]
z_index = -5
offset_left = -7000.0
offset_top = -5000.0
offset_right = -5000.0
offset_bottom = 5000.0
color = Color(0, 0, 0, 0.392157)

[node name="Right" type="ColorRect" parent="World/VisibleBorder"]
z_index = -5
offset_left = 5000.0
offset_top = -5000.0
offset_right = 7000.0
offset_bottom = 5000.0
color = Color(0, 0, 0, 0.392157)

[node name="Bottom" type="ColorRect" parent="World/VisibleBorder"]
z_index = -5
offset_left = -7000.0
offset_top = 5000.0
offset_right = 7000.0
offset_bottom = 6000.0
color = Color(0, 0, 0, 0.392157)

[node name="TileMapLayer" type="TileMapLayer" parent="World"]
z_index = -20
texture_filter = 1
scale = Vector2(10, 10)
tile_map_data = PackedByteArray("AAD5//r/AAAAAAAAAAD5//v/AAAAAAAAAAD5//z/AAAAAAAAAAD5//3/AAAAAAAAAAD5//7/AAAAAAAAAAD5////AAAAAAAAAAD5/wAAAAAAAAAAAAD5/wEAAAAAAAAAAAD5/wIAAAAAAAAAAAD5/wMAAAAAAAAAAAD5/wQAAAAAAAAAAAD5/wUAAAAAAAAAAAD6//r/AAAAAAAAAAD6//v/AAAAAAAAAAD6//z/AAAAAAAAAAD6//3/AAAAAAAAAAD6//7/AAAAAAAAAAD6////AAAAAAAAAAD6/wAAAAAAAAAAAAD6/wEAAAAAAAAAAAD6/wIAAAAAAAAAAAD6/wMAAAAAAAAAAAD6/wQAAAAAAAAAAAD6/wUAAAAAAAAAAAD7//r/AAAAAAAAAAD7//v/AAAAAAAAAAD7//z/AAAAAAAAAAD7//3/AAAAAAAAAAD7//7/AAAAAAAAAAD7////AAAAAAAAAAD7/wAAAAAAAAAAAAD7/wEAAAAAAAAAAAD7/wIAAAAAAAAAAAD7/wMAAAAAAAAAAAD7/wQAAAAAAAAAAAD7/wUAAAAAAAAAAAD8//r/AAAAAAAAAAD8//v/AAAAAAAAAAD8//z/AAAAAAAAAAD8//3/AAAAAAAAAAD8//7/AAAAAAAAAAD8////AAAAAAAAAAD8/wAAAAAAAAAAAAD8/wEAAAAAAAAAAAD8/wIAAAAAAAAAAAD8/wMAAAAAAAAAAAD8/wQAAAAAAAAAAAD8/wUAAAAAAAAAAAD9//r/AAAAAAAAAAD9//v/AAAAAAAAAAD9//z/AAAAAAAAAAD9//3/AAAAAAAAAAD9//7/AAAAAAAAAAD9////AAAAAAAAAAD9/wAAAAAAAAAAAAD9/wEAAAAAAAAAAAD9/wIAAAAAAAAAAAD9/wMAAAAAAAAAAAD9/wQAAAAAAAAAAAD9/wUAAAAAAAAAAAD+//r/AAAAAAAAAAD+//v/AAAAAAAAAAD+//z/AAAAAAAAAAD+//3/AAAAAAAAAAD+//7/AAAAAAAAAAD+////AAAAAAAAAAD+/wAAAAAAAAAAAAD+/wEAAAAAAAAAAAD+/wIAAAAAAAAAAAD+/wMAAAAAAAAAAAD+/wQAAAAAAAAAAAD+/wUAAAAAAAAAAAD///r/AAAAAAAAAAD///v/AAAAAAAAAAD///z/AAAAAAAAAAD///3/AAAAAAAAAAD///7/AAAAAAAAAAD/////AAAAAAAAAAD//wAAAAAAAAAAAAD//wEAAAAAAAAAAAD//wIAAAAAAAAAAAD//wMAAAAAAAAAAAD//wQAAAAAAAAAAAD//wUAAAAAAAAAAAAAAPr/AAAAAAAAAAAAAPv/AAAAAAAAAAAAAPz/AAAAAAAAAAAAAP3/AAAAAAAAAAAAAP7/AAAAAAAAAAAAAP//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAUAAAAAAAAAAAABAPr/AAAAAAAAAAABAPv/AAAAAAAAAAABAPz/AAAAAAAAAAABAP3/AAAAAAAAAAABAP7/AAAAAAAAAAABAP//AAAAAAAAAAABAAAAAAAAAAAAAAABAAEAAAAAAAAAAAABAAIAAAAAAAAAAAABAAMAAAAAAAAAAAABAAQAAAAAAAAAAAABAAUAAAAAAAAAAAACAPr/AAAAAAAAAAACAPv/AAAAAAAAAAACAPz/AAAAAAAAAAACAP3/AAAAAAAAAAACAP7/AAAAAAAAAAACAP//AAAAAAAAAAACAAAAAAAAAAAAAAACAAEAAAAAAAAAAAACAAIAAAAAAAAAAAACAAMAAAAAAAAAAAACAAQAAAAAAAAAAAACAAUAAAAAAAAAAAADAPr/AAAAAAAAAAADAPv/AAAAAAAAAAADAPz/AAAAAAAAAAADAP3/AAAAAAAAAAADAP7/AAAAAAAAAAADAP//AAAAAAAAAAADAAAAAAAAAAAAAAADAAEAAAAAAAAAAAADAAIAAAAAAAAAAAADAAMAAAAAAAAAAAADAAQAAAAAAAAAAAADAAUAAAAAAAAAAAAEAPr/AAAAAAAAAAAEAPv/AAAAAAAAAAAEAPz/AAAAAAAAAAAEAP3/AAAAAAAAAAAEAP7/AAAAAAAAAAAEAP//AAAAAAAAAAAEAAAAAAAAAAAAAAAEAAEAAAAAAAAAAAAEAAIAAAAAAAAAAAAEAAMAAAAAAAAAAAAEAAQAAAAAAAAAAAAEAAUAAAAAAAAAAAAFAPr/AAAAAAAAAAAFAPv/AAAAAAAAAAAFAPz/AAAAAAAAAAAFAP3/AAAAAAAAAAAFAP7/AAAAAAAAAAAFAP//AAAAAAAAAAAFAAAAAAAAAAAAAAAFAAEAAAAAAAAAAAAFAAIAAAAAAAAAAAAFAAMAAAAAAAAAAAAFAAQAAAAAAAAAAAAFAAUAAAAAAAAAAAAGAPr/AAAAAAAAAAAGAPv/AAAAAAAAAAAGAPz/AAAAAAAAAAAGAP3/AAAAAAAAAAAGAP7/AAAAAAAAAAAGAP//AAAAAAAAAAAGAAAAAAAAAAAAAAAGAAEAAAAAAAAAAAAGAAIAAAAAAAAAAAAGAAMAAAAAAAAAAAAGAAQAAAAAAAAAAAAGAAUAAAAAAAAAAAA=")
tile_set = SubResource("TileSet_4j704")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="ItemMenu" parent="CanvasLayer" instance=ExtResource("8_2a8rs")]
unique_name_in_owner = true

[node name="CurrentWaveDisplay" type="RichTextLabel" parent="CanvasLayer"]
unique_name_in_owner = true
offset_left = 27.0
offset_top = 25.0
offset_right = 610.0
offset_bottom = 129.0
theme_override_font_sizes/normal_font_size = 36
text = "Current Wave: 69"

[node name="MenuButton" type="MenuButton" parent="CanvasLayer"]
offset_left = 1742.0
offset_top = 1.0
offset_right = 1918.0
offset_bottom = 81.0
theme_override_font_sizes/font_size = 40
text = "Pause"
item_count = 2
popup/item_0/text = "Menu"
popup/item_0/id = 0
popup/item_1/text = "Quit"
popup/item_1/id = 1
script = ExtResource("11_kp23o")

[connection signal="died_lol" from="PlayerLol" to="." method="_on_player_lol_died_lol"]
[connection signal="timeout" from="WaveTimer" to="." method="_on_wave_timer_timeout"]
[connection signal="timeout" from="WaveTimer/SubTimer" to="." method="_on_timer_timeout"]
[connection signal="pressed" from="DeadMenu/RestartButton" to="DeadMenu/RestartButton" method="_on_pressed"]
[connection signal="pressed" from="DeadMenu/MainMenuButton" to="DeadMenu/MainMenuButton" method="_on_pressed"]
[connection signal="pressed" from="CanvasLayer/MenuButton" to="CanvasLayer/MenuButton" method="_on_pressed"]
